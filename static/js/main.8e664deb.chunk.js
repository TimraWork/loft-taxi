(this["webpackJsonploft-taxi"]=this["webpackJsonploft-taxi"]||[]).push([[0],{205:function(e,t,r){},325:function(e,t,r){"use strict";r.r(t);var n=r(2),a=r(0),c=r(47),o=r.n(c),s=r(377),i=(r(205),r(24)),u=r(26),l=Object.values({MAP:{name:"\u041a\u0430\u0440\u0442\u0430",path:"/map/"},PROFILE:{name:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c",path:"/profile/"},LOGOUT:{name:"\u0412\u044b\u0439\u0442\u0438",path:"/logout/"}}),d=function(){return Object(n.jsx)("nav",{className:"nav",children:l.map((function(e){return Object(n.jsx)(u.c,{to:e.path,className:"nav__item",exact:!0,children:e.name},e.path)}))})},b=r.p+"static/media/logo-icon.59db5da8.svg",p=r.p+"static/media/logo-text.960eac80.svg",j=function(){return Object(n.jsxs)("header",{children:[Object(n.jsxs)(u.b,{to:"/map/",className:"logo",children:[Object(n.jsx)("img",{src:b,alt:"",className:"logo__img logo__img--icon"}),Object(n.jsx)("img",{src:p,alt:"",className:"logo__img logo__img--text"})]}),Object(n.jsx)(d,{})]})},m=r(9),O=r(20),h=r(21),x=r(27),f=r(28),v=r(122),g=r.n(v),y=r(36),k=function(e){Object(x.a)(r,e);var t=Object(f.a)(r);function r(){var e;Object(O.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).initialCenterMap=[30.3056504,59.9429126],e.initialZoom=10,e.removeMapLayer=function(e){e.getLayer("route")&&e.removeLayer("route").removeSource("route")},e}return Object(h.a)(r,[{key:"componentDidMount",value:function(){g.a.accessToken="pk.eyJ1IjoidGltcmF3b3JrMTIzIiwiYSI6ImNraHhoZjB6ODAxMnQycnM3b2lvcWlwemYifQ.vsaprJd2gGI-DvkUfwxDeA",this.map=new g.a.Map({container:this.mapContainer,style:"mapbox://styles/timrawork123/ckhxhn8r30ukv19khb7ah55qr",center:this.initialCenterMap,zoom:this.initialZoom})}},{key:"componentDidUpdate",value:function(){var e=this.props.route;e&&e.length?(this.map.flyTo({center:e[0],zoom:13}),this.removeMapLayer(this.map),this.map.addLayer(function(e){return{id:"route",type:"line",source:{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:e}}},layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#ffc617","line-width":8}}}(e))):(this.map.flyTo({center:this.initialCenterMap,zoom:this.initialZoom}),this.removeMapLayer(this.map))}},{key:"componentWillUnmount",value:function(){this.map.remove()}},{key:"render",value:function(){var e=this;return Object(n.jsx)("div",{className:"map",ref:function(t){return e.mapContainer=t}})}}]),r}(a.Component),w=Object(y.b)((function(e){return{route:e.route}}))(k),S=r(25),N=r(327),C=r(369),E=r(371),_=r(357),L=r(366),T=r(165),I=r.n(T),M=r(166),R=r.n(M),F=r(126),D=r.n(F),P=r(6),A=r.n(P),B=r(360),U=r(361),V=r(362),z=r(363),G={standard:r.p+"static/media/car1.ff391623.png",premium:r.p+"static/media/car2.31785f35.png",business:r.p+"static/media/car3.9b4f218d.png"},q=function(e){var t=e.type,r=e.name,a=e.price;return Object(n.jsx)(_.a,{item:!0,xs:12,sm:4,children:Object(n.jsx)(B.a,{children:Object(n.jsx)(U.a,{children:Object(n.jsxs)(V.a,{children:[Object(n.jsx)(z.a,{variant:"body1",children:r}),Object(n.jsx)(z.a,{variant:"caption",color:"textSecondary",children:"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c"}),Object(n.jsxs)(z.a,{variant:"h6",children:[a,"\u20bd"]}),Object(n.jsx)("img",{className:"car__img",src:G[t],alt:t})]})})})})},Y=function(e){var t=e.locationsFrom,r=e.locationsTo,a=e.locationFrom,c=e.locationTo,o=e.handleLocationFromOnChange,s=e.handleLocationToOnChange,i=e.handleOrderOnClick;return Object(n.jsxs)("form",{className:"car form container--left w--400",children:[Object(n.jsxs)(N.a,{style:{padding:"25px",marginBottom:"10px"},children:[Object(n.jsx)(C.a,{options:t||[],onChange:o,autoHighlight:!0,noOptionsText:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0438\u0437 \u0441\u043f\u0438\u0441\u043a\u0430",renderInput:function(e){return Object(n.jsx)(E.a,Object(S.a)(Object(S.a)({},e),{},{placeholder:"\u041e\u0442\u043a\u0443\u0434\u0430",variant:"standard",name:"from",InputProps:Object(S.a)(Object(S.a)({},e.InputProps),{},{startAdornment:Object(n.jsx)(I.a,{fontSize:"small"})})}))},popupIcon:Object(n.jsx)(D.a,{})}),Object(n.jsx)(C.a,{options:r||[],onChange:s,autoHighlight:!0,noOptionsText:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0438\u0437 \u0441\u043f\u0438\u0441\u043a\u0430",renderInput:function(e){return Object(n.jsx)(E.a,Object(S.a)(Object(S.a)({},e),{},{placeholder:"\u041a\u0443\u0434\u0430",variant:"standard",name:"to",InputProps:Object(S.a)(Object(S.a)({},e.InputProps),{},{startAdornment:Object(n.jsx)(R.a,{fontSize:"small",color:"secondary"})})}))},popupIcon:Object(n.jsx)(D.a,{})})]}),Object(n.jsxs)(N.a,{style:{padding:"25px",marginTop:"-25px"},children:[Object(n.jsxs)(_.a,{container:!0,spacing:2,style:{marginBottom:"20px"},children:[Object(n.jsx)(q,{price:150,name:"\u0421\u0442\u0430\u043d\u0434\u0430\u0440\u0442",type:"standard"}),Object(n.jsx)(q,{price:250,name:"\u041f\u0440\u0435\u043c\u0438\u0443\u043c",type:"premium"}),Object(n.jsx)(q,{price:350,name:"\u0411\u0438\u0437\u043d\u0435\u0441",type:"business"})]}),Object(n.jsx)(L.a,{id:"order-button",onClick:i,disabled:!a||!c,children:"\u0417\u0430\u043a\u0430\u0437\u0430\u0442\u044c"})]})]})};q.propTypes={locationsFrom:A.a.array,locationsTo:A.a.array,locationFrom:A.a.string,locationTo:A.a.string,handleLocationFromOnChange:A.a.func,handleLocationToOnChange:A.a.func,handleOrderOnClick:A.a.func};var J=function(){return Object(n.jsx)("form",{className:"car form container--left w--400",children:Object(n.jsxs)(N.a,{style:{padding:"25px",marginBottom:"10px"},children:[Object(n.jsx)(z.a,{variant:"h1",align:"center",children:"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043f\u043b\u0430\u0442\u0435\u0436\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"}),Object(n.jsx)(z.a,{variant:"subtitle1",align:"center",style:{margin:"-10px 0 30px"},children:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u043e \u0431\u0430\u043d\u043a\u043e\u0432\u0441\u043a\u043e\u0439 \u043a\u0430\u0440\u0442\u0435, \u0447\u0442\u043e\u0431\u044b \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u0437\u0430\u043a\u0430\u0437."}),Object(n.jsx)(u.b,{to:"/profile/",children:Object(n.jsx)(L.a,{className:"w--350",style:{marginBottom:"10px"},"data-testid":"ok-button",children:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u0432 \u043f\u0440\u043e\u0444\u0438\u043b\u044c"})})]})})},W=r(376),H=function(e){Object(x.a)(r,e);var t=Object(f.a)(r);function r(){var e;Object(O.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={hasError:!1},e}return Object(h.a)(r,[{key:"componentDidCatch",value:function(){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?Object(n.jsx)(W.a,{className:"server_error",severity:"error",children:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0440\u0435\u043d\u0434\u0435\u0440\u0430 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0430"}):this.props.children}}]),r}(a.Component),X="GET_ADDRESS_LIST",Z="SET_ADDRESS_LIST",Q=function(e){return{type:Z,payload:{addressList:e}}},K=r(10),$=r.n(K),ee=r(15),te=r(38),re="https://loft-taxi.glitch.me",ne={method:"POST",headers:{"Content-Type":"application/json"}},ae=function(e,t){return fetch(e,t).then((function(e){return e.json()})).catch((function(e){console.log("Could not fetch",e)}))},ce=function(){var e=Object(te.a)($.a.mark((function e(t){return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae("".concat(re,"/card?token=").concat(t),{});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),oe=function(){return ae("".concat(re,"/addressList"),{})},se=function(e){return ae("".concat(re,"/route?address1=").concat(e.address1,"&address2=").concat(e.address2),{})},ie=function(){var e=Object(te.a)($.a.mark((function e(t){var r;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(S.a)(Object(S.a)({},ne),{},{body:JSON.stringify(t)}),e.next=3,ae("".concat(re,"/auth"),r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ue=function(){var e=Object(te.a)($.a.mark((function e(t){var r,n,a,c,o;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.email,n=t.password,a=t.name,c=t.surname,o=Object(S.a)(Object(S.a)({},ne),{},{body:JSON.stringify({name:a,surname:c,email:r,password:n})}),e.abrupt("return",ae("".concat(re,"/register"),o));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),le=function(){var e=Object(te.a)($.a.mark((function e(t){var r,n,a,c,o,s;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.token,n=t.cardNumber,a=t.expiryDate,c=t.cardName,o=t.cvc,s=Object(S.a)(Object(S.a)({},ne),{},{body:JSON.stringify({token:r,cardNumber:n,expiryDate:a,cardName:c,cvc:o})}),e.next=4,ae("".concat(re,"/card"),s);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),de=$.a.mark(pe),be=$.a.mark(je);function pe(){var e;return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(ee.b)(oe);case 3:if(!(e=t.sent).addresses){t.next=7;break}return t.next=7,Object(ee.d)(Q(e.addresses));case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0);case 12:case"end":return t.stop()}}),de,null,[[0,9]])}function je(){return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ee.e)(X,pe);case 2:case"end":return e.stop()}}),be)}var me="GET_ROUTE",Oe="SET_ROUTE",he="REMOVE_ROUTE",xe=$.a.mark(ve),fe=$.a.mark(ge);function ve(e){var t;return $.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(ee.b)(se,e.payload);case 3:if(!(t=r.sent)){r.next=7;break}return r.next=7,Object(ee.d)({type:Oe,payload:{route:t}});case 7:r.next=12;break;case 9:r.prev=9,r.t0=r.catch(0),console.log(r.t0);case 12:case"end":return r.stop()}}),xe,null,[[0,9]])}function ge(){return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ee.e)(me,ve);case 2:case"end":return e.stop()}}),fe)}var ye=function(e){var t=e.handleNewOrderClick;return Object(n.jsxs)(N.a,{className:"text--center w--400 container--left",style:{padding:"30px"},children:[Object(n.jsx)(z.a,{variant:"h1",align:"center",children:"\u0417\u0430\u043a\u0430\u0437 \u0440\u0430\u0437\u043c\u0435\u0449\u0435\u043d"}),Object(n.jsx)(z.a,{variant:"subtitle1",align:"center",style:{margin:"-10px 0 20px"},children:"\u0412\u0430\u0448\u0435 \u0442\u0430\u043a\u0441\u0438 \u0443\u0436\u0435 \u0435\u0434\u0435\u0442 \u043a \u0432\u0430\u043c. \u041f\u0440\u0438\u0431\u0443\u0434\u0435\u0442 \u043f\u0440\u0438\u0431\u043b\u0438\u0437\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0447\u0435\u0440\u0435\u0437 10 \u043c\u0438\u043d\u0443\u0442."}),Object(n.jsx)(L.a,{className:"w--350","data-testid":"ok-button",onClick:t,children:"\u0421\u0434\u0435\u043b\u0430\u0442\u044c \u043d\u043e\u0432\u044b\u0439 \u0437\u0430\u043a\u0430\u0437"})]})},ke=function(e){return Object.keys(e).length},we=Object(y.b)((function(e){return{addressList:e.addressList,route:e.route,profile:e.profile}}),{getAddressList:function(){return{type:X}},getRoute:function(e,t){return{type:me,payload:{address1:e,address2:t}}}})((function(e){var t=e.addressList,r=e.getAddressList,c=e.getRoute,o=e.profile;Object(a.useEffect)((function(){r()}),[r]);var s=Object(a.useState)(!1),i=Object(m.a)(s,2),u=i[0],l=i[1],d=Object(a.useState)(t),b=Object(m.a)(d,2),p=b[0],j=b[1],O=Object(a.useState)(t),h=Object(m.a)(O,2),x=h[0],f=h[1],v=Object(a.useState)(""),g=Object(m.a)(v,2),y=g[0],k=g[1],S=Object(a.useState)(""),N=Object(m.a)(S,2),C=N[0],E=N[1];return Object(n.jsxs)(H,{children:[Object(n.jsx)(w,{}),u&&Object(n.jsx)(ye,{handleNewOrderClick:function(e){e.preventDefault(),c(k(""),E("")),l(!1)}}),ke(o)&&!u&&Object(n.jsx)(Y,{locations:t,locationsTo:x,locationFrom:y,locationTo:C,locationsFrom:p,handleLocationFromOnChange:function(e){k(e.target.textContent);var r=t.filter((function(t){return t!==e.target.textContent}));f(r)},handleLocationToOnChange:function(e){E(e.target.textContent);var r=t.filter((function(t){return t!==e.target.textContent}));j(r)},handleOrderOnClick:function(){c(y,C),l(!0)}}),!ke(o)&&!u&&Object(n.jsx)(J,{})]})})),Se=r(373),Ne=function(e){var t,r,a=e.errors,c=e.register,o=e.formState,s=e.onSubmit,i=e.handleSubmit;return Object(n.jsx)("div",{className:"center_block",children:Object(n.jsx)(N.a,{style:{padding:"70px"},children:Object(n.jsxs)("form",{className:"form w--350",onSubmit:i(s),children:[Object(n.jsx)(z.a,{variant:"h1",align:"center",children:"\u0412\u043e\u0439\u0442\u0438"}),Object(n.jsx)(E.a,{inputRef:c,variant:"standard",label:"Email *",name:"email",id:"email",inputProps:{type:"email"},error:!!a.email,helperText:null===a||void 0===a||null===(t=a.email)||void 0===t?void 0:t.message}),Object(n.jsx)(E.a,{inputRef:c,style:{marginBottom:"50px"},variant:"standard",label:"\u041f\u0430\u0440\u043e\u043b\u044c *",name:"password",id:"password",inputProps:{type:"password"},error:!!a.password,helperText:null===a||void 0===a||null===(r=a.password)||void 0===r?void 0:r.message}),Object(n.jsx)(L.a,{id:"login-button",className:"mb--30",disabled:!o.isValid,children:"\u0412\u043e\u0439\u0442\u0438"}),Object(n.jsxs)(Se.a,{sx:{textAlign:"center"},children:["\u041d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c?\xa0",Object(n.jsx)(u.b,{to:"/registration/",id:"registration-link",href:"#",color:"secondary",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})]})]})})})},Ce=r(367),Ee="LOG_IN",_e="LOG_OUT",Le="AUTHENTICATE",Te="LOG_IN_FAILED",Ie=function(e){return{type:Ee,payload:{token:e}}},Me=function(e){return{type:Te,payload:{error:e}}},Re=function(){return{type:_e}},Fe={isLoggedIn:!1,token:"",error:""},De="GET_PROFILE",Pe="SET_PROFILE",Ae="EDIT_PROFILE",Be="EDIT_PROFILE_FAILED",Ue="REMOVE_PROFILE",Ve=function(e){return{type:Pe,payload:{profileData:e}}},ze=function(e){return{type:Be,payload:{error:e}}},Ge="\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u043e\u043c. \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043a \u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442.",qe=$.a.mark(We),Ye=$.a.mark(He),Je=$.a.mark(Xe);function We(e){var t;return $.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(ee.b)(ie,e.payload);case 3:if(!(t=r.sent).success){r.next=13;break}return r.next=7,Object(ee.b)(ce,t.token);case 7:return r.next=9,Object(ee.d)((n=t.token,{type:De,payload:{token:n}}));case 9:return r.next=11,Object(ee.d)(Ie(t.token));case 11:r.next=15;break;case 13:return r.next=15,Object(ee.d)(Me(t.error));case 15:r.next=21;break;case 17:return r.prev=17,r.t0=r.catch(0),r.next=21,Object(ee.d)(Me(Ge));case 21:case"end":return r.stop()}var n}),qe,null,[[0,17]])}function He(){return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(ee.d)({type:Ue});case 3:return e.next=5,Object(ee.d)({type:he});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),Ye,null,[[0,7]])}function Xe(){return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ee.e)(Le,We);case 2:return e.next=4,Object(ee.e)(_e,He);case 4:case"end":return e.stop()}}),Je)}var Ze,Qe,Ke=r(59),$e=r(33),et=r(68),tt=$e.a().shape({email:$e.b().email("\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u0430\u044f \u043f\u043e\u0447\u0442\u0430 \u0434\u043e\u043b\u0436\u043d\u0430 \u0438\u043c\u0435\u0442\u044c \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442").required("Email - \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),password:$e.b().required("\u041f\u0430\u0440\u043e\u043b\u044c - \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435")}),rt=Object(y.b)((function(e){return{isLoggedIn:e.auth.isLoggedIn,error:e.auth.error}}),{logOut:Re,authenticate:function(e,t){return{type:Le,payload:{email:e,password:t}}}})((function(e){var t=e.isLoggedIn,r=e.error,c=e.logOut,o=e.authenticate;Object(a.useEffect)((function(){c()}),[c]),Object(a.useEffect)((function(){r&&d(!1)}),[r]);var s=Object(a.useState)(!1),u=Object(m.a)(s,2),l=u[0],d=u[1],b=Object(Ke.useForm)({mode:"onChange",resolver:Object(et.yupResolver)(tt)}),p=b.register,j=b.handleSubmit,O=b.errors,h=b.formState;return Object(n.jsxs)(n.Fragment,{children:[t?Object(n.jsx)(i.a,{to:"/map/"}):Object(n.jsx)(Ne,{errors:O,register:p,formState:h,onSubmit:function(e){d(!0);var t=e.email,r=e.password;o(t,r)},handleSubmit:j}),r&&Object(n.jsx)(W.a,{className:"server_error",severity:"error",children:r}),l&&Object(n.jsx)(Ce.a,{})]})})),nt=r(14),at=function(e){var t=e.number,r=e.expiration,a=e.formState;return Object(n.jsxs)("div",{className:"card white_container ".concat(a.isValid?"card--visa":""),children:[Object(n.jsx)("div",{className:"card__expiration",children:r}),Object(n.jsx)("div",{className:"card__number",children:t})]})},ct=r(31),ot=r(370),st=r(173),it=r(170),ut=r.n(it),lt=function(e){var t,r,a=e.errors,c=e.register,o=e.formState,s=e.handleSubmit,i=e.expiration,u=e.number,l=e.cardNameOnChange,d=e.cardNumberOnChange,b=e.cardExpirationOnChange,p=e.cardCvcOnChange,j=e.saveProfile;return Object(n.jsx)("div",{className:"center_block bg--cover",children:Object(n.jsx)(N.a,{className:"text--center w--880",style:{padding:"70px"},children:Object(n.jsxs)("form",{className:"form",children:[Object(n.jsxs)("div",{align:"center",children:[Object(n.jsx)(z.a,{variant:"h1",align:"center",children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"}),Object(n.jsx)(z.a,{variant:"subtitle1",align:"center",style:{margin:"-10px 0 30px"},children:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u043b\u0430\u0442\u0435\u0436\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"})]}),Object(n.jsxs)(_.a,{container:!0,spacing:3,children:[Object(n.jsxs)(_.a,{item:!0,xs:12,sm:6,children:[Object(n.jsx)(E.a,{label:"\u0418\u043c\u044f \u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0430",id:"name",name:"name",variant:"standard",onChange:l,inputRef:c}),Object(n.jsx)(E.a,{variant:"standard",label:"\u041d\u043e\u043c\u0435\u0440 \u043a\u0430\u0440\u0442\u044b *",id:"number",name:"number",inputRef:c,error:!!a.number,helperText:null===a||void 0===a||null===(t=a.number)||void 0===t?void 0:t.message,onChange:d}),Object(n.jsxs)(_.a,{container:!0,spacing:3,className:"mb--30",children:[Object(n.jsx)(_.a,{item:!0,xs:12,sm:6,children:Object(n.jsx)(ct.a,{utils:st.a,children:Object(n.jsx)(ot.a,{inputVariant:"standard",margin:"none",name:"expiration",id:"expiration",value:i,label:"MM/YY *",disableToolbar:!0,format:"MM/yy",views:["year","month"],disablePast:"true",onChange:b})})}),Object(n.jsx)(_.a,{item:!0,xs:12,sm:6,children:Object(n.jsx)(E.a,{variant:"standard",label:"CVC *",id:"cvc",name:"cvc",inputRef:c,error:!!a.cvc,helperText:null===a||void 0===a||null===(r=a.cvc)||void 0===r?void 0:r.message,onChange:p})})]})]}),Object(n.jsx)(_.a,{item:!0,xs:12,sm:6,children:Object(n.jsx)(at,{number:u,expiration:ut()(i).format("MM/YY"),formState:o})})]}),Object(n.jsx)("div",{align:"center",children:Object(n.jsx)(L.a,{id:"save-button",className:"w--350",onClick:s(j),type:"submit",disabled:!o.isValid,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})]})})})},dt=function(){return Object(n.jsxs)(N.a,{className:"text--center w--880",style:{padding:"70px"},children:[Object(n.jsx)(z.a,{variant:"h1",align:"center",children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"}),Object(n.jsx)(z.a,{variant:"subtitle1",align:"center",style:{margin:"-10px 0 30px"},children:"\u041f\u043b\u0430\u0442\u0451\u0436\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u044b. \u0422\u0435\u043f\u0435\u0440\u044c \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0437\u0430\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0442\u0430\u043a\u0441\u0438."}),Object(n.jsx)(u.b,{to:"/map/",children:Object(n.jsx)(L.a,{className:"w--350","data-testid":"ok-button",children:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043d\u0430 \u043a\u0430\u0440\u0442\u0443"})})]})},bt=function(e){return{countSymbols:e,message:"\u0414\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0440\u043e\u0432\u043d\u043e ".concat(e," \u0441\u0438\u043c\u0432\u043e\u043b\u0430")}},pt=$e.a().shape({name:$e.b(),number:(Ze=$e.b().required("\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f")).min.apply(Ze,Object(nt.a)(Object.values(bt(22)))),cvc:(Qe=$e.b().required("\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f")).min.apply(Qe,Object(nt.a)(Object.values(bt(3))))}),jt=Object(y.b)((function(e){return{token:e.auth.token,profile:e.profile}}),{editProfile:function(e,t,r,n,a){return{type:Ae,payload:{token:e,cardNumber:t,expiryDate:r,cardName:n,cvc:a}}}})((function(e){var t=e.token,r=e.profile,c=e.editProfile,o=Object(a.useState)(!1),s=Object(m.a)(o,2),i=s[0],u=s[1],l=Object(a.useState)(r&&r.cardName||""),d=Object(m.a)(l,2),b=d[0],p=d[1],j=Object(a.useState)(r&&r.cardNumber||""),O=Object(m.a)(j,2),h=O[0],x=O[1],f=Object(a.useState)(r&&r.expiryDate||new Date),v=Object(m.a)(f,2),g=v[0],y=v[1],k=Object(a.useState)(r&&r.cvc||""),w=Object(m.a)(k,2),S=w[0],N=w[1],C=Object(Ke.useForm)({mode:"onChange",resolver:Object(et.yupResolver)(pt),defaultValues:{name:b,number:h,cvc:S,expiration:g}}),E=C.register,_=C.handleSubmit,L=C.errors,T=C.formState;return Object(n.jsxs)(n.Fragment,{children:[i?Object(n.jsx)(dt,{}):Object(n.jsx)(lt,{errors:L,register:E,formState:T,handleSubmit:_,expiration:g,number:h,cardNameOnChange:function(e){p(e.target.value)},cardNumberOnChange:function(e){var t=e.target.value;e.target.value=function(e){var t;return(null===(t=e.replace(/\s/g,"").replace(/[^\d]/g,"").match(/.{1,4}/g))||void 0===t?void 0:t.join("  ").substr(0,22))||""}(t),x(e.target.value)},cardExpirationOnChange:function(e){y(e.toISOString())},cardCvcOnChange:function(e){var t=e.target.value;e.target.value=function(e){return e.replace(/\s/g,"").replace(/[^\d]/g,"").substr(0,3)||""}(t),N(e.target.value)},saveProfile:function(){c(t,h,g,b,S),u(!0)}}),r&&r.error&&Object(n.jsx)(W.a,{className:"server_error",severity:"error",children:r&&r.error})]})})),mt=function(e){var t,r,a,c,o=e.errors,s=e.register,i=e.formState,l=e.onSubmit,d=e.handleSubmit;return Object(n.jsx)("div",{className:"center_block",children:Object(n.jsx)(N.a,{style:{padding:"70px"},children:Object(n.jsxs)("form",{className:"form w--350",onSubmit:d(l),children:[Object(n.jsx)(z.a,{variant:"h1",align:"center",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(n.jsx)(E.a,{variant:"standard",label:"Email *",name:"email",inputProps:{type:"text"},inputRef:s,error:!!o.email,helperText:null===o||void 0===o||null===(t=o.email)||void 0===t?void 0:t.message}),Object(n.jsx)(E.a,{variant:"standard",label:"\u0418\u043c\u044f *",name:"name",inputRef:s,error:!!o.name,helperText:null===o||void 0===o||null===(r=o.name)||void 0===r?void 0:r.message}),Object(n.jsx)(E.a,{variant:"standard",label:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f *",name:"surname",inputRef:s,error:!!o.surname,helperText:null===o||void 0===o||null===(a=o.surname)||void 0===a?void 0:a.message}),Object(n.jsx)(E.a,{style:{marginBottom:"50px"},variant:"standard",label:"\u041f\u0440\u0438\u0434\u0443\u043c\u0430\u0439\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c *",name:"password",inputProps:{type:"password"},inputRef:s,error:!!o.password,helperText:null===o||void 0===o||null===(c=o.password)||void 0===c?void 0:c.message}),Object(n.jsx)(L.a,{id:"login-button",className:"mb--30",disabled:!i.isValid,children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"}),Object(n.jsxs)(Se.a,{sx:{textAlign:"center"},children:["\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?\xa0",Object(n.jsx)(u.b,{to:"/login/",id:"login-link",href:"#",color:"secondary",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})})})},Ot="REGISTER",ht=$.a.mark(ft),xt=$.a.mark(vt);function ft(e){var t;return $.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(ee.b)(ue,e.payload);case 3:if(!(t=r.sent).success){r.next=9;break}return r.next=7,Object(ee.d)(Ie(t.token,e.payload.email));case 7:r.next=11;break;case 9:return r.next=11,Object(ee.d)(Me(t.error));case 11:r.next=17;break;case 13:return r.prev=13,r.t0=r.catch(0),r.next=17,Object(ee.d)(Me(Ge));case 17:case"end":return r.stop()}}),ht,null,[[0,13]])}function vt(){return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ee.e)(Ot,ft);case 2:case"end":return e.stop()}}),xt)}var gt=$e.a().shape({email:$e.b().email("\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u0430\u044f \u043f\u043e\u0447\u0442\u0430 \u0434\u043e\u043b\u0436\u043d\u0430 \u0438\u043c\u0435\u0442\u044c \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442").required("Email - \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),password:$e.b().required("\u041f\u0430\u0440\u043e\u043b\u044c - \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),name:$e.b().required("\u0418\u043c\u044f - \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),surname:$e.b().required("\u0424\u0430\u043c\u0438\u043b\u0438\u044f - \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435")}),yt=Object(y.b)((function(e){return{isLoggedIn:e.auth.isLoggedIn,error:e.auth.error}}),{logOut:Re,register:function(e,t,r,n){return{type:Ot,payload:{email:e,password:t,name:r,surname:n}}}})((function(e){var t=e.isLoggedIn,r=e.error,c=e.logOut,o=e.register;Object(a.useEffect)((function(){c()}),[c]);var s=Object(Ke.useForm)({mode:"onChange",resolver:Object(et.yupResolver)(gt)}),u=s.register,l=s.handleSubmit,d=s.errors,b=s.formState;return Object(n.jsxs)(n.Fragment,{children:[t?Object(n.jsx)(i.a,{to:"/map/"}):Object(n.jsx)(mt,{errors:d,register:u,formState:b,onSubmit:function(e){var t=e.name,r=e.surname,n=e.email,a=e.password;o(n,a,t,r)},handleSubmit:l}),r&&Object(n.jsx)(W.a,{className:"server_error",severity:"error",children:r})]})})),kt=r(103),wt=function(e){var t=e.component,r=e.isLoggedIn,a=Object(kt.a)(e,["component","isLoggedIn"]);return Object(n.jsx)(i.b,Object(S.a)(Object(S.a)({},a),{},{render:function(e){return r?Object(n.jsx)(t,Object(S.a)({},e)):Object(n.jsx)(i.a,{to:"/login/"})}}))};wt=Object(y.b)((function(e){return{isLoggedIn:e.auth.isLoggedIn}}))(wt);var St=function(){var e=Object(i.g)().pathname,t=new Set(["/login/","/logout/","/registration/"]).has(e)?" layout--without_header":"";return Object(n.jsxs)("div",{className:"layout"+t,children:[Object(n.jsx)(j,{}),Object(n.jsx)("main",{className:"main",children:Object(n.jsxs)(i.d,{children:[Object(n.jsx)(i.b,{path:"/",exact:!0,component:rt}),Object(n.jsx)(i.b,{path:"/login/",exact:!0,component:rt}),Object(n.jsx)(i.b,{path:"/logout/",component:rt}),Object(n.jsx)(i.b,{path:"/registration/",component:yt}),Object(n.jsx)(wt,{path:"/map/",component:we}),Object(n.jsx)(wt,{path:"/profile/",component:jt})]})})]})},Nt=r(368),Ct=r(171),Et=r(37),_t=r(175),Lt=$.a.mark(Mt),Tt=$.a.mark(Rt),It=$.a.mark(Ft);function Mt(e){var t,r;return $.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(ee.b)(ce,e.payload.token);case 3:if(t=n.sent,t.id,r=Object(kt.a)(t,["id"]),!t.id){n.next=10;break}return n.next=8,Object(ee.d)(Ve(r));case 8:n.next=12;break;case 10:return n.next=12,Object(ee.d)(ze(t.error));case 12:n.next=18;break;case 14:return n.prev=14,n.t0=n.catch(0),n.next=18,Object(ee.d)(ze(Ge));case 18:case"end":return n.stop()}}),Lt,null,[[0,14]])}function Rt(e){var t;return $.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(ee.b)(le,e.payload);case 3:if(!(t=r.sent).success){r.next=9;break}return r.next=7,Object(ee.d)(Ve(e.payload));case 7:r.next=11;break;case 9:return r.next=11,Object(ee.d)(ze(t.error));case 11:r.next=17;break;case 13:return r.prev=13,r.t0=r.catch(0),r.next=17,Object(ee.d)(ze(Ge));case 17:case"end":return r.stop()}}),Tt,null,[[0,13]])}function Ft(){return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ee.e)(De,Mt);case 2:return e.next=4,Object(ee.e)(Ae,Rt);case 4:case"end":return e.stop()}}),It)}var Dt=Object(Et.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ee:return{isLoggedIn:!0,token:t.payload.token,error:""};case _e:case Le:return{isLoggedIn:!1,token:"",error:""};case Te:return{isLoggedIn:!1,token:"",error:t.payload.error};default:return e}},addressList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Z:return t.payload.addressList;default:return e}},route:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Oe:return t.payload.route;case he:return[];default:return e}},profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Pe:return t.payload.profileData;case Ue:return{};case Be:return{error:t.payload.error};default:return e}}}),Pt=$.a.mark(At);function At(){return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ee.a)([Object(ee.c)(vt),Object(ee.c)(Xe),Object(ee.c)(je),Object(ee.c)(ge),Object(ee.c)(Ft)]);case 2:case"end":return e.stop()}}),Pt)}var Bt=r(128),Ut=r(172),Vt={key:"root",storage:r.n(Ut).a},zt=Object(Bt.a)(Vt,Dt),Gt=Object(_t.a)(),qt=Object(Et.e)(zt,Object(Et.d)(Object(Et.a)(Gt),window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__():function(e){return e}));Gt.run(At);var Yt=Object(Bt.b)(qt),Jt=r(174),Wt=r(69),Ht="#FDBF5A",Xt="#1C1A19",Zt="#E0E0E0",Qt=Object(Jt.a)({palette:{primary:{main:Xt},secondary:{main:Ht}},shape:{borderRadius:10},status:{danger:Wt.a[500]},components:{MuiButton:{styleOverrides:{root:{textTransform:"none",boxShadow:"none",fontSize:"21px",fontWeight:400,width:"100%",backgroundColor:Ht,"&.Mui-disabled ":{backgroundColor:Zt}},textPrimary:{"&:hover":{backgroundColor:"#FFA842",color:Xt}}}},MuiPaper:{styleOverrides:{root:{position:"relative",boxShadow:"0px 3px 20px rgba(0, 0, 0, 0.2) !important"}}},MuiCardContent:{styleOverrides:{root:{padding:10}}},MuiFormControl:{styleOverrides:{root:{marginBottom:20,width:"100%"}}},MuiInputLabel:{styleOverrides:{root:{"&.Mui-focused":{fontWeight:700,fontSize:16}}}},MuiInput:{styleOverrides:{underline:{"&:before":{borderBottom:"1px solid ".concat(Zt)}}}},MuiPickersYear:{styleOverrides:{root:{color:Xt,transition:"all .3s","&:hover, &.MuiPickersYear-yearSelected":{background:Zt}},yearDisabled:{color:Zt,"&:hover, &.MuiPickersYear-yearSelected":{background:"transparent"}}}},MuiPickersMonth:{styleOverrides:{root:{color:Xt,transition:"all .4s","&:hover, &.MuiPickersMonth-monthSelected":{background:Zt}},monthDisabled:{color:Zt,"&:hover, &.MuiPickersMonth-monthSelected":{background:"transparent"}}}}},typography:{subtitle1:{fontSize:18,color:"#7B7B7B"},h1:{fontSize:32,fontWeight:700,marginBottom:20}}});o.a.render(Object(n.jsx)(s.a,{theme:Qt,children:Object(n.jsx)(y.a,{store:qt,children:Object(n.jsxs)(Ct.a,{loading:null,persistor:Yt,children:[Object(n.jsx)(Nt.a,{}),Object(n.jsx)(u.a,{children:Object(n.jsx)(St,{})})]})})}),document.getElementById("root"))}},[[325,1,2]]]);
//# sourceMappingURL=main.8e664deb.chunk.js.map